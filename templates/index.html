{% extends 'base.html' %} 
{% load static %}
{% block content %}

<!-- Change -->

<div class="Dashboard">
  <h4>CGDA Mandate</h4>

  <p>
    The Defence Accounts Department (DAD), under the Ministry of Defence and led
    by the Controller General of Defence Accounts, oversees audit, financial
    advice, payment, and accounting for the Armed Forces. This includes managing
    pay, allowances, pensions, and auditing cash and store accounts for
    organizations like the Army, Navy, Air Force, DRDO, and Ordnance Factories.
    DAD has 1110 offices nationwide, ensuring prompt services through a network
    of Controllers, Area Accounts Offices, and Local Audit Offices. It also
    provides training through various institutes and is responsible for
    preparing Annual Consolidated Accounts and rendering the Annual Audit
    Certificate for Defence Services.
  </p>
  <span
    ><p>
      For more information
      <a href="https://cgda.nic.in/index.php?page=abtdad">Click hear</a>
    </p></span
  >
</div>

<div
  class="cgda-glance text-center mb-3 py-2"
  style="
    background-color: #3c41a1;
    color: white;
    box-shadow: 0px 4px 2px -2px gray;
  "
>
  <h3>CGDA at a Glance</h3>
</div>

<!-- # budegte section  -->
 <!-- all defennce Budget  -->
<section class="section dashboard">
  <div class="row">
    <div class="col-xxl-4 col-md-6">
      <div class="card info-card revenue-card">
        <div class="card-body">
          <h5 class="card-title">Defence Budget <span>| ₹ In Crores </span></h5>

          <div class="d-flex align-items-center">
            <div
              class="card-icon rounded-circle d-flex align-items-center justify-content-center"
            >
              <i class="bi bi-bank"></i>
            </div>
            <div class="ps-3">
              <h6>₹ {{Total_deefence_budget }}</h6>
            </div>
          </div>
        </div>
      </div>
    </div>
 <!-- all defennce Expenditure  -->
    <div class="col-xxl-4 col-md-6">
      <div class="card info-card sales-card">
        <div class="card-body">
          <h5 class="card-title">Expenditure <span>| ₹ In Crores </span></h5>

          <div class="d-flex align-items-center">
            <div
            class="card-icon rounded-circle d-flex align-items-center justify-content-center"
            style="background: #ffecdf"
          >
            <i
              class="bi bi-currency-rupee"
              style="color: #ff771d"
            ></i>
          </div>
            <div class="ps-3">
              <h6>₹ {{ Total_Defence_Expenditure }}</h6>
              <!-- <span class="text-success small pt-1 fw-bold">12%</span>
              <span class="text-muted small pt-2 ps-1">increase</span> -->
            </div>
          </div>
        </div>
      </div>
    </div>
 <!-- all defennce Percentage  -->
    <div class="col-xxl-4 col-md-6">
      <div class="card info-card sales-card">
        <div class="card-body">
          <h5 class="card-title">Acievement <span></span></h5>

          <div class="d-flex align-items-center">
            <div
            class="card-icon rounded-circle d-flex align-items-center justify-content-center"
            style="background: #ffecdf"
          >
            <i class="bi bi-percent" style="color: #ff771d"></i>
           
          </div>
            <div class="ps-3">
              <h6> {{ expenditure_percentage }} %</h6>
              <!-- <span class="text-success small pt-1 fw-bold">12%</span>
              <span class="text-muted small pt-2 ps-1">increase</span> -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- # Grant wise budegte section  -->
<section class="section dashboard">
  <div class="row">
    <!-- Left side columns -->
    <div class="col-lg-12">
      <div class="row">
        <!-- Ministry Of Defense Civil -->
        <div class="col-xxl-3 col-md-6">
          <div class="card info-card revenue-card">
            <div class="filter">
              <a class="icon" href="#" data-bs-toggle="dropdown"
                ><i class="bi bi-three-dots"></i
              ></a>
              <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
                <li class="dropdown-header text-start">
                  <h6>Filter</h6>
                </li>

                <li><a class="dropdown-item" href="#">Today</a></li>
                <li><a class="dropdown-item" href="#">This Month</a></li>
                <li><a class="dropdown-item" href="#">This Year</a></li>
              </ul>
            </div>

            <div class="card-body">
              <h5 class="card-title">Budget <span>| Today</span></h5>
              <div class="d-flex align-items-center">
                <div
                  class="card-icon rounded-circle d-flex align-items-center justify-content-center"
                >
                  <i class="bi bi-bank"></i>
                </div>
                <div class="ps-3">
                  <p style="color: #012970">Ministry Of Defense Civil</p>
                  <h6>₹ {{ mod_civil_bud }}</h6>

                  <!-- <span class="text-success small pt-1 fw-bold">12%</span>
                  <span class="text-muted small pt-2 ps-1">increase</span> -->
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Ministry Of Defense Civil -->

        <!-- Defence Service Revenue (DSR) Budget -->
        <div class="col-xxl-3 col-md-6">
          <div class="card info-card revenue-card">
            <div class="filter">
              <a class="icon" href="#" data-bs-toggle="dropdown"
                ><i class="bi bi-three-dots"></i
              ></a>
              <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
                <li class="dropdown-header text-start">
                  <h6>Filter</h6>
                </li>

                <li><a class="dropdown-item" href="#">Today</a></li>
                <li><a class="dropdown-item" href="#">This Month</a></li>
                <li><a class="dropdown-item" href="#">This Year</a></li>
              </ul>
            </div>

            <div class="card-body">
              <h5 class="card-title">Budget <span>| This Month</span></h5>

              <div class="d-flex align-items-center">
                <div
                  class="card-icon rounded-circle d-flex align-items-center justify-content-center"
                >
                  <i class="bi bi-bank"></i>
                </div>
                <div class="ps-3">
                  <p style="color: #012970">Defence Service Revenue (DSR)</p>
                  <h6>₹ {{Defence_service_revenue_bud}}</h6>
                  <!-- <span class="text-success small pt-1 fw-bold">8%</span>
                  <span class="text-muted small pt-2 ps-1">increase</span> -->
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Defence Service Revenue (DSR) Budget -->

        <!-- Capital Outlay Budget-->
        <div class="col-xxl-3 col-xl-12">
          <div class="card info-card revenue-card">
            <div class="filter">
              <a class="icon" href="#" data-bs-toggle="dropdown"
                ><i class="bi bi-three-dots"></i
              ></a>
              <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
                <li class="dropdown-header text-start">
                  <h6>Filter</h6>
                </li>

                <li><a class="dropdown-item" href="#">Today</a></li>
                <li><a class="dropdown-item" href="#">This Month</a></li>
                <li><a class="dropdown-item" href="#">This Year</a></li>
              </ul>
            </div>

            <div class="card-body">
              <h5 class="card-title">Budget <span>| This Year</span></h5>

              <div class="d-flex align-items-center">
                <div
                  class="card-icon rounded-circle d-flex align-items-center justify-content-center"
                >
                  <i class="bi bi-bank"></i>
                </div>
                <div class="ps-3">
                  <p style="color: #012970">Capital Outlay</p>
                  <h6>₹ {{capital_Outlay_bud}}</h6>
                  <!-- <span class="text-danger small pt-1 fw-bold">12%</span>
                  <span class="text-muted small pt-2 ps-1">decrease</span> -->
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Capital Outlay Budget-->

        <!-- Budegt Defence Pensions -->
        <div class="col-xxl-3 col-md-6">
          <div class="card info-card revenue-card">
            <div class="filter">
              <a class="icon" href="#" data-bs-toggle="dropdown"
                ><i class="bi bi-three-dots"></i
              ></a>
              <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
                <li class="dropdown-header text-start">
                  <h6>Filter</h6>
                </li>

                <li><a class="dropdown-item" href="#">Today</a></li>
                <li><a class="dropdown-item" href="#">This Month</a></li>
                <li><a class="dropdown-item" href="#">This Year</a></li>
              </ul>
            </div>

            <div class="card-body">
              <h5 class="card-title">Budget <span>| Today</span></h5>

              <div class="d-flex align-items-center">
                <div
                  class="card-icon rounded-circle d-flex align-items-center justify-content-center"
                >
                  <i class="bi bi-bank"></i>
                </div>
                <div class="ps-3">
                  <p style="color: #012970">Defenece Pension</p>
                  <h6>₹ {{defence_pensions_bud}}</h6>

                  <!-- <span class="text-success small pt-1 fw-bold">12%</span>
                  <span class="text-muted small pt-2 ps-1">increase</span> -->
                </div>
              </div>
            </div>
          </div>
        </div>
      



        <!-- Below cards showing the Expenditure of grant no-19 -->

        <div class="col-lg-12">
          <div class="row">
            <!-- mod_civil Card  expenditure-->

            <div class="col-xxl-3 col-md-6">
              <div class="card info-card sales-card">
                  <div class="filter">
                      <a class="icon" href="#" data-bs-toggle="dropdown">
                          <i class="bi bi-three-dots"></i>
                      </a>
                      <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
                          <li class="dropdown-header text-start">
                              <h6>Filter</h6>
                          </li>
                          <li><a class="dropdown-item" href="#">Today</a></li>
                          <li><a class="dropdown-item" href="#">This Month</a></li>
                          <li><a class="dropdown-item" href="#">This Year</a></li>
                      </ul>
                  </div>
                  <div class="card-body">
                      <h5 class="card-title">Expenditure <span>| Grant-19 </span></h5>
                      <div class="d-flex align-items-center justify-content-between">
                          <div class="card-icon rounded-circle d-flex align-items-center justify-content-center" style="background: #ffecdf">
                              <i class="bi bi-currency-rupee" style="color: #ff771d"></i>
                          </div>
                          <div class="ps-3">
                              <p style="color: #012970">Ministry Of Defense Civil</p>
                              <h6>{{mod_civil}}</h6>
                          </div>
                          <div class="card-icon rounded-circle d-flex align-items-center justify-content-center percentagegrant">
                            <span class="text-success small pt-1 fw-bold" style="color: #ff771d;">
                              {{mod_civil_pct}}%
                            </span>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
          
            <!-- mod_civil Card  expenditure-->

            <!-- Defence Service Revenue (DSR) -->
           <div class="col-xxl-3 col-md-6">
              <div class="card info-card sales-card">
                <div class="filter">
                  <a class="icon" href="#" data-bs-toggle="dropdown">
                    <i class="bi bi-three-dots"></i>
                  </a>
                  <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
                    <li class="dropdown-header text-start">
                      <h6>Filter</h6>
                    </li>
                    <li><a class="dropdown-item" href="#">Today</a></li>
                    <li><a class="dropdown-item" href="#">This Month</a></li>
                    <li><a class="dropdown-item" href="#">This Year</a></li>
                  </ul>
                </div>
            
                <div class="card-body">
                  <h5 class="card-title">
                    Expenditure <span>| Grant-20</span>
                  </h5>
                  <div class="d-flex align-items-center justify-content-between">
                    <div
                      class="card-icon rounded-circle d-flex align-items-center justify-content-center"
                      style="background: #ffecdf"
                    >
                      <i
                        class="bi bi-currency-rupee"
                        style="color: #ff771d"
                      ></i>
                    </div>
                    <div class="ps-3">
                      <p style="color: #012970">(DSR)</p>
                      <h6>{{dsr}}</h6>
                    </div>
                    <div class="card-icon rounded-circle d-flex align-items-center justify-content-center percentagegrant">
                      <span class="text-success small pt-1 fw-bold" style="color: #ff771d;">
                        {{DSR_pct}}%
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            </div>       
           <!-- Defence Service Revenue (DSR) -->

            <!-- Captial outlay  Card -->
            <div class="col-xxl-3 col-md-6">
              <div class="card info-card sales-card">
                <div class="filter">
                  <a class="icon" href="#" data-bs-toggle="dropdown">
                    <i class="bi bi-three-dots"></i>
                  </a>
                  <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
                    <li class="dropdown-header text-start">
                      <h6>Filter</h6>
                    </li>
                    <li><a class="dropdown-item" href="#">Today</a></li>
                    <li><a class="dropdown-item" href="#">This Month</a></li>
                    <li><a class="dropdown-item" href="#">This Year</a></li>
                  </ul>
                </div>
            
                <div class="card-body">
                  <h5 class="card-title">
                    Expenditure <span>| Grant-21 </span>
                  </h5>
                  <div class="d-flex align-items-center justify-content-between">
                    <div
                      class="card-icon rounded-circle d-flex align-items-center justify-content-center"
                      style="background: #ffecdf"
                    >
                      <i
                        class="bi bi-currency-rupee"
                        style="color: #ff771d"
                      ></i>
                    </div>
                    <div class="ps-3">
                      <p style="color: #012970">Capital Outlay</p>
                      <h6>{{cap_sum}}</h6>
                    </div>
                    <div class="card-icon rounded-circle d-flex align-items-center justify-content-center percentagegrant">
                      <span class="text-success small pt-1 fw-bold" style="color: #ff771d;">
                        {{capital_Outlay_pct}}%
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            </div> 
           
            <!-- Captial outlay  Card -->

            <!-- Defence Pension  -->
            <div class="col-xxl-3 col-md-6">
              <div class="card info-card sales-card">
                <div class="filter">
                  <a class="icon" href="#" data-bs-toggle="dropdown">
                    <i class="bi bi-three-dots"></i>
                  </a>
                  <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
                    <li class="dropdown-header text-start">
                      <h6>Filter</h6>
                    </li>
                    <li><a class="dropdown-item" href="#">Today</a></li>
                    <li><a class="dropdown-item" href="#">This Month</a></li>
                    <li><a class="dropdown-item" href="#">This Year</a></li>
                  </ul>
                </div>
            
                <div class="card-body">
                  <h5 class="card-title">
                    Expenditure <span>| Grant-22</span>
                  </h5>
                  <div class="d-flex align-items-center justify-content-between">
                    <div
                      class="card-icon rounded-circle d-flex align-items-center justify-content-center"
                      style="background: #ffecdf"
                    >
                      <i
                        class="bi bi-currency-rupee"
                        style="color: #ff771d"
                      ></i>
                    </div>
                    <div class="ps-3">
                      <p style="color: #012970">Defence Pension</p>
                      <h6>{{dps_sum}}</h6>
                    </div>
                    <div class="card-icon rounded-circle d-flex align-items-center justify-content-center percentagegrant">
                      <span class="text-success small pt-1 fw-bold" style="color: #ff771d;">
                        {{defence_pensions_pct}}%
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            </div>  

        <!-- End Sales Card  Rajvir -->

        <!-- Reports  line chart comment  -->
        <!-- 
<div class="col-12">
  <div class="card">

    <div class="filter">
      <a class="icon" href="#" data-bs-toggle="dropdown">
        <i class="bi bi-three-dots"></i>
      </a>
      <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
        <li class="dropdown-header text-start">
          <h6>Filter</h6>
        </li>

        <li><a class="dropdown-item" href="#">Today</a></li>
        <li><a class="dropdown-item" href="#">This Month</a></li>
        <li><a class="dropdown-item" href="#">This Year</a></li>
      </ul>
    </div>

    <div class="card-body text-center"> 
      <h5 class="card-title">Reports <span class="text-muted">/ Today</span></h5> 

    
      <div id="reportsChart" class="d-flex justify-content-center">
        <script>
          document.addEventListener("DOMContentLoaded", () => {
            new ApexCharts(document.querySelector("#reportsChart"), {
              series: [{
                name: 'Sales',
                data: [31, 40, 28, 51, 42, 82, 56],
              }, {
                name: 'Revenue',
                data: [11, 32, 45, 32, 34, 52, 41]
              }, {
                name: 'Customers',
                data: [15, 11, 32, 18, 9, 24, 11]
              }],
              chart: {
                height: 350,
                type: 'area',
                toolbar: {
                  show: false
                },
              },
              markers: {
                size: 4
              },
              colors: ['#4154f1', '#2eca6a', '#ff771d'],
              fill: {
                type: "gradient",
                gradient: {
                  shadeIntensity: 1,
                  opacityFrom: 0.3,
                  opacityTo: 0.4,
                  stops: [0, 90, 100]
                }
              },
              dataLabels: {
                enabled: false
              },
              stroke: {
                curve: 'smooth',
                width: 2
              },
              xaxis: {
                type: 'datetime',
                categories: ["2018-09-19T00:00:00.000Z", "2018-09-19T01:30:00.000Z", "2018-09-19T02:30:00.000Z", "2018-09-19T03:30:00.000Z", "2018-09-19T04:30:00.000Z", "2018-09-19T05:30:00.000Z", "2018-09-19T06:30:00.000Z"]
              },
              tooltip: {
                x: {
                  format: 'dd/MM/yy HH:mm'
                },
              }
            }).render();
          });
        </script>
      </div>
    </div>
    #End Line Chart 
  </div>
</div>
-->



<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>

<!-- #-------------------- Bar chart for upcoming devlopment ------------------------------- -->

<!-- -------------------grant-19---------------------- -->
<!-- -------------------grant-20---------------------- -->

<div class="section">
  <div class=".container">
    <div class="row">

      <!-- Bar Chart 1 - Ministry of Defence (Civil) -->
      <div class="col-lg-6">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Ministry of Defence (Civil)</h5>
            <div id="barChart1" style="width: 100%; height: 800px;"></div>
            <!-- Include Plotly.js -->
            <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
            <script>
              document.addEventListener("DOMContentLoaded", () => {
                const labels = {{ minorhd_desc_19|safe }};  // Descriptions for y-axis
                const dataValues = {{ amt_19|safe }};  // Values for x-axis
            
                const data = [{
                  type: 'bar',
                  x: dataValues,
                  y: labels,
                  orientation: 'h',
                  marker: {
                    color: [
                      'rgba(255, 99, 132, 0.2)',
                      'rgba(255, 159, 64, 0.2)',
                      'rgba(255, 205, 86, 0.2)',
                      'rgba(75, 192, 192, 0.2)',
                      'rgba(54, 162, 235, 0.2)',
                      'rgba(153, 102, 255, 0.2)',
                      'rgba(201, 203, 207, 0.2)',
                    ],
                    line: {
                      color: [
                        'rgb(255, 99, 132)',
                        'rgb(255, 159, 64)',
                        'rgb(255, 205, 86)',
                        'rgb(75, 192, 192)',
                        'rgb(54, 162, 235)',
                        'rgb(153, 102, 255)',
                        'rgb(201, 203, 207)'
                      ],
                      width: 1
                    }
                  },
                  text: dataValues.map(val => val.toLocaleString()),
                  textposition: 'auto',
                  hovertemplate: '<b>%{y}</b> ( ₹ In crore ): <b>%{x}</b><extra></extra>',  // Bold labels and values
                  hoverlabel: {
                    font: {
                      size: 16,  // Increase font size
                      color: '#000',
                      family: 'Arial, sans-serif'
                    }
                  }
                }];
            
                const layout = {
                  title: 'Grant-19',
                  xaxis: {
                    title: 'Amount (₹)',
                    zeroline: true
                  },
                  yaxis: {
                    title: 'Description',
                    tickangle: 0,
                    autorange: 'reversed',
                    tickfont: {
                      size: 12,
                      color: '#000'
                    },
                    automargin: true
                  },
                  hovermode: 'closest',  // Only highlight the bar without affecting the Y-axis labels
                  showlegend: false
                };
            
                Plotly.newPlot('barChart1', data, layout);
              });
            </script>
            
            
            
          </div>
        </div>
      </div>

      <!-- Bar Chart 2 - Defence Services (Revenue) -->
      <div class="col-lg-6">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Defence Services (Revenue)</h5>
            <div id="barChart2" style="width: 100%; height: 800px;"></div>
            <script>
              document.addEventListener("DOMContentLoaded", () => {
                const labels = {{ minorhd_desc_20|safe }};
                const dataValues = {{ amt_20|safe }};

                const data = [{
                  type: 'bar',
                  x: dataValues,
                  y: labels,
                  orientation: 'h',
                  marker: {
                    color: [
                      'rgba(255, 99, 132, 0.2)',
                      'rgba(255, 159, 64, 0.2)',
                      'rgba(255, 205, 86, 0.2)',
                      'rgba(75, 192, 192, 0.2)',
                      'rgba(54, 162, 235, 0.2)',
                      'rgba(153, 102, 255, 0.2)',
                      'rgba(201, 203, 207, 0.2)'
                    ],
                    line: {
                      color: [
                        'rgb(255, 99, 132)',
                        'rgb(255, 159, 64)',
                        'rgb(255, 205, 86)',
                        'rgb(75, 192, 192)',
                        'rgb(54, 162, 235)',
                        'rgb(153, 102, 255)',
                        'rgb(201, 203, 207)'
                      ],
                      width: 1
                    }
                  },
                  text: dataValues.map(val => val.toLocaleString()),
                  textposition: 'auto',
                  hovertemplate: '<b>%{y}</b> ( ₹ In crore ) : <b>%{x}</b><extra></extra> ',  // Bold labels and values
                  hoverinfo: 'none',
                  hoverlabel: {  // Custom hover label settings
                    font: {
                      size: 16,  // Increase font size
                      color: '#000',  // Change text color if needed
                      family: 'Arial, sans-serif'  // Adjust font family
                    }, 
                  }
                }];
            
                const layout = {
                  title: 'Grant-19',
                  xaxis: {
                    title: 'Amount (₹)',
                    zeroline: true
                  },
                  yaxis: {
                    title: 'Description',
                    tickangle: 0,
                    autorange: 'reversed',
                    tickfont: {
                      size: 12,
                      color: '#000'  // Adjust tick font color if needed
                    },
                    tickpadding: 10,
                    automargin: true
                  },
                  showlegend: false
                };
            
                Plotly.newPlot('barChart2', data, layout);
              });
            </script>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


 
<!-- -------------------grant-21---------------------- -->
<!-- -------------------grant-22---------------------- -->
<div class="section">
  <div class=".container">
    <div class="row">
    
      <!-- Bar Chart 3 - Capital Outlay on Defence Services (Grant-21) -->
      <div class="col-lg-6">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Capital Outlay on Defence Services</h5>
            <div id="barChart3" style="width: 100%; height: 800px;"></div>
            <script>
              document.addEventListener("DOMContentLoaded", () => {
                const labels = {{ minorhd_desc_21|safe }};
                const dataValues = {{ amt_21|safe }};
      
                const data = [{
                  type: 'bar',
                  x: dataValues,
                  y: labels,
                  orientation: 'h',
                  marker: {
                    color: [
                      'rgba(255, 99, 132, 0.2)',
                      'rgba(255, 159, 64, 0.2)',
                      'rgba(255, 205, 86, 0.2)',
                      'rgba(75, 192, 192, 0.2)',
                      'rgba(54, 162, 235, 0.2)',
                      'rgba(153, 102, 255, 0.2)',
                      'rgba(201, 203, 207, 0.2)'
                    ],
                    line: {
                      color: [
                        'rgb(255, 99, 132)',
                        'rgb(255, 159, 64)',
                        'rgb(255, 205, 86)',
                        'rgb(75, 192, 192)',
                        'rgb(54, 162, 235)',
                        'rgb(153, 102, 255)',
                        'rgb(201, 203, 207)'
                      ],
                      width: 1
                    }
                  },
                  text: dataValues.map(val => val.toLocaleString()),
                  textposition: 'auto',
                  hovertemplate: '<b>%{y}</b> ( ₹ In crore ): <b>%{x}</b><extra></extra>',
                  hoverinfo: 'none',
                  hoverlabel: {
                    font: {
                      size: 16,
                      color: '#000',
                      family: 'Arial, sans-serif'
                    }
                  }
                }];
      
                const layout = {
                  title: 'Grant-21',
                  xaxis: {
                    title: 'Amount (₹)',
                    zeroline: true
                  },
                  yaxis: {
                    title: 'Description',
                    tickangle: 0,
                    autorange: 'reversed',
                    tickfont: {
                      size: 12,
                      color: '#000'
                    },
                    tickpadding: 10,
                    automargin: true
                  },
                  showlegend: false
                };
      
                Plotly.newPlot('barChart3', data, layout);
              });
            </script>
          </div>
        </div>
      </div>
      

      <!-- Bar Chart 4 - Defence Pensions (Grant-22) -->
      <div class="col-lg-6">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Defence Pensions</h5>
            <div id="barChart4" style="width: 100%; height: 800px;"></div>
            <script>
              document.addEventListener("DOMContentLoaded", () => {
                const labels = {{ minorhd_desc_22|safe }};
                const dataValues = {{ amt_22|safe }};
      
                const data = [{
                  type: 'bar',
                  x: dataValues,
                  y: labels,
                  orientation: 'h',
                  marker: {
                    color: [
                      'rgba(255, 99, 132, 0.2)',
                      'rgba(255, 159, 64, 0.2)',
                      'rgba(255, 205, 86, 0.2)',
                      'rgba(75, 192, 192, 0.2)',
                      'rgba(54, 162, 235, 0.2)',
                      'rgba(153, 102, 255, 0.2)',
                      'rgba(201, 203, 207, 0.2)'
                    ],
                    line: {
                      color: [
                        'rgb(255, 99, 132)',
                        'rgb(255, 159, 64)',
                        'rgb(255, 205, 86)',
                        'rgb(75, 192, 192)',
                        'rgb(54, 162, 235)',
                        'rgb(153, 102, 255)',
                        'rgb(201, 203, 207)'
                      ],
                      width: 1
                    }
                  },
                  text: dataValues.map(val => val.toLocaleString()),
                  textposition: 'auto',
                  hovertemplate: '<b>%{y}</b> ( ₹ In crore ): <b>%{x}</b><extra></extra>',
                  hoverinfo: 'none',
                  hoverlabel: {
                    font: {
                      size: 16,
                      color: '#000',
                      family: 'Arial, sans-serif'
                    }
                  }
                }];
      
                const layout = {
                  title: 'Grant-22',
                  xaxis: {
                    title: 'Amount (₹)',
                    zeroline: true
                  },
                  yaxis: {
                    title: 'Description',
                    tickangle: 0,
                    autorange: 'reversed',
                    tickfont: {
                      size: 12,
                      color: '#000'
                    },
                    tickpadding: 10,
                    automargin: true
                  },
                  showlegend: false
                };
      
                Plotly.newPlot('barChart4', data, layout);
              });
            </script>
          </div>
        </div>
      </div>
      
    </div>
  </div>
</div>


<!-- Recent Sales -->
<!-- <div class="col-12">
  <div class="card recent-sales overflow-auto">
    <div class="filter">
      <a class="icon" href="#" data-bs-toggle="dropdown"
        ><i class="bi bi-three-dots"></i
      ></a>
      <ul
        class="dropdown-menu dropdown-menu-end dropdown-menu-arrow"
      >
        <li class="dropdown-header text-start">
          <h6>Filter</h6>
        </li>
        <li><a class="dropdown-item" href="#">Today</a></li>
        <li><a class="dropdown-item" href="#">This Month</a></li>
        <li><a class="dropdown-item" href="#">This Year</a></li>
      </ul>
    </div>

    <div class="card-body">
      <h5 class="card-title">Recent Sales <span>| Today</span></h5>

      <table class="table table-borderless datatable">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">Customer</th>
            <th scope="col">Product</th>
            <th scope="col">Price</th>
            <th scope="col">Status</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <th scope="row"><a href="#">#2457</a></th>
            <td>Brandon Jacob</td>
            <td>
              <a href="#" class="text-primary"
                >At praesentium minu</a
              >
            </td>
            <td>$64</td>
            <td><span class="badge bg-success">Approved</span></td>
          </tr>
          <tr>
            <th scope="row"><a href="#">#2147</a></th>
            <td>Bridie Kessler</td>
            <td>
              <a href="#" class="text-primary"
                >Blanditiis dolor omnis similique</a
              >
            </td>
            <td>$47</td>
            <td><span class="badge bg-warning">Pending</span></td>
          </tr>
          <tr>
            <th scope="row"><a href="#">#2049</a></th>
            <td>Ashleigh Langosh</td>
            <td>
              <a href="#" class="text-primary"
                >At recusandae consectetur</a
              >
            </td>
            <td>$147</td>
            <td><span class="badge bg-success">Approved</span></td>
          </tr>
          <tr>
            <th scope="row"><a href="#">#2644</a></th>
            <td>Angus Grady</td>
            <td>
              <a href="#" class="text-primary"
                >Ut voluptatem id earum et</a
              >
            </td>
            <td>$67</td>
            <td><span class="badge bg-danger">Rejected</span></td>
          </tr>
          <tr>
            <th scope="row"><a href="#">#2645</a></th>
            <td>Raheem Lehner</td>
            <td>
              <a href="#" class="text-primary"
                >Sunt similique distinctio</a
              >
            </td>
            <td>$165</td>
            <td><span class="badge bg-success">Approved</span></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div> -->
<!-- End Recent Sales -->
<section class="section dashboard">
  <div class="row">
    <!-- Airforce Chart Card -->
    <div class="col-xxl-6 col-md-12">
      <div class="card info-card sales-card">
        <div class="card-body">
          <h5 class="card-title">Airforce Budget <span>| ₹ In Crores</span></h5>
          <div class="d-flex align-items-center">
            <div
              class="card-icon rounded-circle d-flex align-items-center justify-content-center"
              style="background: #e3f2fd"
            >
              <i class="bi bi-pie-chart" style="color: #3c3cff"></i>
            </div>
            <div class="ps-3">
              <h6>Total: ₹ 8,416.43</h6>
            </div>
          </div>
          <div id="airforceChart" style="width:100%; height: 400px;"></div>
        </div>
      </div>
    </div>

    <!-- DRDO Chart Card -->
    <div class="col-xxl-6 col-md-12">
      <div class="card info-card sales-card">
        <div class="card-body">
          <h5 class="card-title">DRDO Budget <span>| ₹ In Crores</span></h5>
          <div class="d-flex align-items-center">
            <div
              class="card-icon rounded-circle d-flex align-items-center justify-content-center"
              style="background: #fff3e0"
            >
              <i class="bi bi-pie-chart" style="color: #ff7f0e"></i>
            </div>
            <div class="ps-3">
              <h6>Total: ₹ 1,869.40 </h6>
            </div>
          </div>
          <div id="drdoChart" style="width:100%; height: 400px;"></div>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  // Airforce Chart
  var airforceData = [{
    values: [5524.74, 2438.24, 101.03, 319.33, 32.09],
    labels: ["Pay & Allowances (Salary)", "Store", "Work", "Transportation", "Miscellaneous"],
    type: "pie",
    hole: 0.4,
    textinfo: "label+percent",
    textposition: "outside",
    automargin: true,
    marker: { colors: ["#3c3cff", "#ff7f0e", "#2ca02c", "#9467bd", "#d62728"] }
  }];
  
  var airforceLayout = {
    title: { text: "Airforce 2078 (₹ In Crore)", font: { size: 16 }, x: 0.5 },
    annotations: [{ font: { size: 20 }, showarrow: false, text: "8,416.43", x: 0.5, y: 0.5 }],
    showlegend: true,
    legend: { orientation: "h", x: 0, y: -0.2 },
    margin: { t: 50, l: 0, r: 0, b: 0 }
  };
  
  Plotly.newPlot('airforceChart', airforceData, airforceLayout);

  // DRDO Chart
  var drdoData = [{
    values: [1196.61, 319.33, 101.03, 199.89, 29.56],
    labels: ["Pay & Allowances (Salary)", "Store", "Work", "Transportation", "Miscellaneous"],
    type: "pie",
    hole: 0.4,
    textinfo: "label+percent",
    textposition: "outside",
    automargin: true,
    marker: { colors: ["#3c3cff", "#ff7f0e", "#2ca02c", "#9467bd", "#d62728"] }
  }];
  
  var drdoLayout = {
    title: { text: "DRDO 2080 (₹ In Crore)", font: { size: 16 }, x: 0.5 },
    annotations: [{ font: { size: 20 }, showarrow: false, text: "1,869.40", x: 0.5, y: 0.5 }],
    showlegend: true,
    legend: { orientation: "h", x: 0, y: -0.2 },
    margin: { t: 50, l: 0, r: 0, b: 0 }
  };
  
  Plotly.newPlot('drdoChart', drdoData, drdoLayout);
</script>


{% endblock %}

